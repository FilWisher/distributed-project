'''
Cleans up event data from Icarus Simulator

Input format: JSONPickle format provided by the 'EVENT_TIMELINE' data collector

Output format: JSON object in the form:
{
  topology: {
    nodes: [...],
    edges: [...]
  },
  events: [
    {"event_type":"...", ...}, ...
  ]
}
'''
import sys, os, json, jsonpickle

currDir = os.getcwd()

if currDir not in sys.path:
    sys.path.append(currDir)

def writefile(filename, output):
    f = open(filename, 'w')
    f.write(output)
    f.close

def reFormat(filename):

    results =  json.loads(open(filename).read())

    print results[u'_results'][u'__reduce__'][1][u'py/tuple'][0][0][u'py/tuple']

for i in sys.argv[1:]:
    reFormat(i)


